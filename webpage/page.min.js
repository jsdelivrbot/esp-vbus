!function(t){function e(t){this._node=null,this._valueNode=null,this._cardData=t,this._createUI()}function i(){this._cards=[],this._progressValue=null}function n(){this._timeout=1,this._interval=15,this._cardData=[{title:"Lauke",parse:function(t){return t&&"t7"in t?+t.t7/10:null},format:function(t){return t.toFixed(1)+r}},{title:"Vanduo",parse:function(t){return t&&"t3"in t&&"t4"in t?{high:+t.t3/10,low:+t.t4/10}:null},format:function(t){return t.low.toFixed(1)+r+" ~ "+t.high.toFixed(1)+r}},{title:"Data",parse:function(t){var e;return t&&"date"in t?(e=t.date.split(/\D/),{y:e[0],m:e[1],d:e[2]}):null},format:function(t){return t.y+"-"+t.m+"-"+t.d}},{title:"Laikas",parse:function(t){var e;return t&&"time"in t?(e=+t.time%1440,{h:~~(e/60),m:e%60}):null},format:function(t){return("0"+t.h).slice(-2)+":"+("0"+t.m).slice(-2)}},{title:"Šildymas",parse:function(t){return t&&"t6"in t&&"s11"in t?{tflow:+t.t6/10,tset:+t.s11/10}:null},format:function(t){return t.tflow.toFixed(1)+r+" / "+t.tset.toFixed(1)+r}},{title:"Pranešimai",parse:function(t){return t&&"msg"in t?+t.msg:null},format:function(t){return t}}],this._view=new i}var a=t.document,s=a.createElement.bind(a),r="&deg;";e.prototype._createUI=function(){var t;this._node=s("div"),this._node.classList.add("card"),t=s("h2"),t.innerHTML=this._cardData.title,this._node.appendChild(t),this._valueNode=s("p"),this._valueNode.innerHTML="-",this._node.appendChild(this._valueNode)},e.prototype.appendTo=function(t){t.appendChild(this._node)},e.prototype.update=function(t){var e=this._cardData.parse(t);return null===e?void(this._valueNode.innerHTML="-"):(this._valueNode.innerHTML=this._cardData.format(e),void(this._cardData.shouldWarn&&this._cardData.shouldWarn(e)?this._node.classList.add("warn"):this._node.classList.remove("warn")))},i.prototype.init=function(t){var i=this,n=a.body,r=s("h1"),o=s("div"),u=s("div");r.innerHTML=a.title,n.appendChild(r),o.classList.add("progress"),this._progressValue=s("div"),this._progressValue.classList.add("progress-value"),o.appendChild(this._progressValue),n.appendChild(o),t.forEach(function(t){var n=new e(t);n.appendTo(u),i._cards.push(n)}),n.appendChild(u)},i.prototype.setProgress=function(t){this._progressValue.style.width=t+"%"},i.prototype.update=function(t){this._cards.forEach(function(e){e.update(t)})},n.prototype.start=function(){var e=this;this._view.init(this._cardData),t.setInterval(e._onTick.bind(e),1e3)},n.prototype._onTick=function(){this._timeout--,this._updateProgress(),this._timeout>0||(this._timeout=this._interval,this._getData())},n.prototype._updateProgress=function(){this._view.setProgress(100*this._timeout/this._interval)},n.prototype._getData=function(){var e=this,i=new t.XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?e._onDataReveived.call(e,JSON.parse(i.responseText)):console.log("An error occurred during your request: ",i.status,i.statusText))},i.open("GET","/data.json"),i.send()},n.prototype._onDataReveived=function(t){this._view.update(t)};var o=new n;o.start()}(this);