!function(t){function e(t){this._node=null,this._valueNode=null,this._cardData=t,this._createUI()}function i(){this._cards=[],this._progressValue=null}function a(){this._timeout=1,this._interval=5,this._cardData=[{title:"Lauke",format:function(t){return t&&t.t7?(+t.t7).toFixed(1)+"&deg;":"-"}},{title:"Vanduo",format:function(t){return t&&t.t3&&t.t4?(+t.t3).toFixed(1)+"&deg; ~ "+(+t.t4).toFixed(1)+"&deg;":"- ~ -"}},{title:"Data",format:function(t){if(t&&t.date){var e=t.date.split(/\D/);return e[0]+"-"+e[1]+"-"+e[2]}return"-"}},{title:"Laikas",format:function(t){if(t&&t.date){var e=t.date.split(/\D/);return e[3]+":"+e[4]}return"-"}},{title:"Šildymas",format:function(t){return t&&t.t6&&t.s11?(+t.t6).toFixed(1)+"&deg; / "+(+t.s11).toFixed(1)+"&deg;":"-"}},{title:"Pranešimai",format:function(t){return t&&t.msg?+t.t6+"":"-"}}],this._view=new i}var n=t.document;e.prototype._createUI=function(){var t;this._node=n.createElement("div"),this._node.classList.add("card"),t=n.createElement("h2"),t.innerHTML=this._cardData.title,this._node.appendChild(t),this._valueNode=n.createElement("p"),this._valueNode.innerHTML="-",this._node.appendChild(this._valueNode)},e.prototype.appendTo=function(t){t.appendChild(this._node)},e.prototype.update=function(t){this._valueNode.innerHTML=this._cardData.format(t)},i.prototype.init=function(t){var i=this,a=n.body,r=n.createElement("h1"),o=n.createElement("div"),s=n.createElement("div");r.innerHTML=n.title,a.appendChild(r),o.classList.add("progress"),this._progressValue=n.createElement("div"),this._progressValue.classList.add("progress-value"),o.appendChild(this._progressValue),a.appendChild(o),t.forEach(function(t){var a=new e(t);a.appendTo(s),i._cards.push(a)}),a.appendChild(s)},i.prototype.setProgress=function(t){this._progressValue.style.width=t+"%"},i.prototype.update=function(t){this._cards.forEach(function(e){e.update(t)})},a.prototype.start=function(){var e=this;this._view.init(this._cardData),t.setInterval(e._onTick.bind(e),1e3)},a.prototype._onTick=function(){this._timeout--,this._updateProgress(),this._timeout>0||(this._timeout=this._interval,this._getData())},a.prototype._updateProgress=function(){this._view.setProgress(100*this._timeout/this._interval)},a.prototype._getData=function(){var e=this,i=new t.XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?e._onDataReveived.call(e,JSON.parse(i.responseText)):console.log("An error occurred during your request: ",i.status,i.statusText))},i.open("GET","/data.json"),i.send()},a.prototype._onDataReveived=function(t){this._view.update(t)};var r=new a;r.start()}(this);